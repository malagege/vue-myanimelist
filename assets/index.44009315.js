import{p as e,a as t,c as s,o as a,b as n,d as o,r as l,e as i,F as r,w as h,v as d,f as c,g as m,h as u,t as p,i as g,j as v,n as b,k as f,l as w,m as L,q as y,s as j,u as x,x as S}from"./vendor.094f3ccb.js";const k={};e("data-v-40ab164b");const M={class:"mt-5 py-5 text-muted text-center text-small"},A=[n("p",{class:"mb-1"},[o("網站動畫資料來源來自"),n("a",{href:"https://yuc.wiki/"},"YuC's AnimeList")],-1)];t(),k.render=function(e,t,n,o,l,i){return a(),s("footer",M,A)},k.__scopeId="data-v-40ab164b";const $={props:{jsonpath:String},components:{Footer:k}};$.render=function(e,t,n,o,h,d){const c=l("router-view"),m=l("Footer");return a(),s(r,null,[i(c),i(m)],64)};var O=[{name:"2021年10月新番",url:"/202110"},{name:"2021年7月新番",url:"/202107"},{name:"2021年4月新番",url:"/202104"},{name:"2021年1月新番",url:"/202101"},{name:"2020年10月新番",url:"/202010"},{name:"2020年7月新番",url:"/202007"},{name:"2020年4月新番",url:"/202004"},{name:"2020年1月新番",url:"/202001"},{name:"2019年10月新番",url:"/201910"}];const I={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 48 48"},C=[n("g",{fill:"none",stroke:"currentColor","stroke-width":"4","stroke-linejoin":"round"},[n("path",{d:"M18.284 43.171a19.995 19.995 0 0 1-8.696-5.304a6 6 0 0 0-5.182-9.838A20.09 20.09 0 0 1 4 24c0-2.09.32-4.106.916-6H5a6 6 0 0 0 5.385-8.65a19.968 19.968 0 0 1 8.267-4.627A6 6 0 0 0 24 8a6 6 0 0 0 5.348-3.277a19.968 19.968 0 0 1 8.267 4.627A6 6 0 0 0 43.084 18A19.99 19.99 0 0 1 44 24c0 1.38-.14 2.728-.406 4.029a6 6 0 0 0-5.182 9.838a19.995 19.995 0 0 1-8.696 5.304a6.003 6.003 0 0 0-11.432 0z"}),n("path",{d:"M24 31a7 7 0 1 0 0-14a7 7 0 0 0 0 14z"})],-1)];var N={name:"icon-park-outline-setting-two",render:function(e,t){return a(),s("svg",I,C)}};const H={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},_=[n("path",{d:"M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8z",fill:"none"},null,-1),n("path",{d:"M292 64h-72a4 4 0 0 0-4 4v28h80V68a4 4 0 0 0-4-4z",fill:"none"},null,-1),n("path",{d:"M447.55 96H336V48a16 16 0 0 0-16-16H192a16 16 0 0 0-16 16v48H64.45L64 136h33l20.09 314A32 32 0 0 0 149 480h214a32 32 0 0 0 31.93-29.95L415 136h33zM176 416l-9-256h33l9 256zm96 0h-32V160h32zm24-320h-80V68a4 4 0 0 1 4-4h72a4 4 0 0 1 4 4zm40 320h-33l9-256h33z",fill:"currentColor"},null,-1)];const V={props:{settingVar:Array,storageName:{type:String,default:"saveItems"}},data:()=>({searchText:"",settings:[]}),computed:{settingFilted(){return this.searchText?this.settings.filter((e=>{var t;return(null==(t=null==e?void 0:e.name)?void 0:t.indexOf(this.searchText))>=0})):this.settings}},components:{IconSetting:N,IconTrashSharp:{name:"ion-trash-sharp",render:function(e,t){return a(),s("svg",H,_)}}},methods:{updateSettingName(e){e.name=prompt("新增設定名稱")},readSetting(e){this.$emit("update:settingVar",e.settingVar)},replaceSetting(e){e.settingVar=this.settingVar},deleteSetting(e,t){this.settings.splice(t,1)},appendSetting(){let e={};e.name=prompt("新增設定名稱"),e.settingVar=this.settingVar,(null==e?void 0:e.name)&&this.settings.unshift(e)}},mounted(){try{let e=JSON.parse(localStorage.getItem(this.storageName));(null==e?void 0:e.length)&&(this.settings=e)}catch(e){console.log.error(e)}},watch:{settings:{handler:function(){console.log("save settings"),localStorage.setItem(this.storageName,JSON.stringify(this.settings))},deep:!0}}};e("data-v-178e86ed");const U={class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},E={class:"modal fade bd-example-modal-lg",tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true",id:"exampleModal"},J={class:"modal-dialog modal-lg"},T={class:"modal-content"},z=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"exampleModalToggleLabel"},"設定"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Y={class:"modal-body"},R={class:"header d-flex"},D={class:"flex-grow-1"},F=n("hr",null,null,-1),B={class:"item-title"},q=["onClick"],P=["onClick"],G=["onClick"],K=["onClick"],Q=n("div",{class:"modal-footer"},[m(' <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">Open second modal</button> ')],-1);t(),V.render=function(e,t,o,m,g,v){const b=l("IconSetting"),f=l("IconTrashSharp");return a(),s(r,null,[n("a",U,[i(b)]),n("div",E,[n("div",J,[n("div",T,[z,n("div",Y,[n("div",R,[n("div",D,[h(n("input",{class:"form-input",type:"text",placeholder:"快速搜尋","onUpdate:modelValue":t[0]||(t[0]=e=>g.searchText=e)},null,512),[[d,g.searchText,void 0,{trim:!0}]]),n("button",{type:"button",class:"btn btn-light",onClick:t[1]||(t[1]=e=>g.searchText="")},"清空")]),n("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=e=>v.appendSetting())},"另存設定")]),F,(a(!0),s(r,null,c(g.settings,((e,t)=>{var o;return h((a(),s("div",{class:"item",key:e.name},[n("span",B,p(e.name),1),n("div",null,[n("button",{class:"btn btn-sm btn-secondary",onClick:t=>v.updateSettingName(e)}," 編輯名稱 ",8,q)]),n("div",null,[n("button",{class:"btn btn-sm btn-info",onClick:t=>v.readSetting(e)}," 讀取設定 ",8,P)]),n("div",null,[n("button",{class:"btn btn-sm btn-success",onClick:t=>v.replaceSetting(e)}," 覆蓋設定 ",8,G)]),n("div",null,[n("button",{class:"btn btn-sm btn-danger",onClick:s=>v.deleteSetting(e,t)},[i(f)],8,K)])],512)),[[u,(null==(o=null==e?void 0:e.name)?void 0:o.indexOf(g.searchText))>=0]])})),128))]),Q])])])],64)},V.__scopeId="data-v-178e86ed";const W={components:{SettingManager:V},props:{jsonpath:String,udata:Array},data:()=>({animeMenu:O}),computed:{selectAnimeYearMonth(){return"/"+this.jsonpath},storageName(){return this.$route.path.indexOf("/all")>=0?"allItem":"MonthItem"}},methods:{linkAnimeYearMonth(e){console.log(e.target.value),this.$router.push({path:e.target.value}).catch((e=>{throw new Error(`Problem handling something: ${e}.`)})),console.log("test")},updateSettingVar(e){console.log(e),this.$emit("update:udata",e)}}};e("data-v-61dd7a3d");const X={class:"navbar navbar-light bg-light"},Z={class:"container justify-content-start"},ee=n("a",{class:"navbar-brand",href:"#"},[n("img",{src:"https://getbootstrap.com/docs/5.0/assets/brand/bootstrap-logo.svg",alt:"",width:"30",height:"24",class:"d-inline-block align-text-top"}),o(" 我的新番清單 ")],-1),te={class:"navbar-nav mr-auto mb-2 me-auto mb-lg-0"},se={class:"nav-item"},ae=["value"],ne={class:"nav-item"},oe=o("月份清單"),le={class:"nav-item"},ie=o("每季清單");t(),W.render=function(e,t,o,d,u,f){const w=l("router-link"),L=l("SettingManager");return a(),s("nav",X,[n("div",Z,[ee,n("ul",te,[n("li",se,[o.jsonpath?h((a(),s("select",{key:0,class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>f.selectAnimeYearMonth=e),onChange:t[1]||(t[1]=e=>f.linkAnimeYearMonth(e))},[(a(!0),s(r,null,c(u.animeMenu,(e=>(a(),s("option",{key:e.name,value:e.url},p(e.name),9,ae)))),128))],544)),[[g,f.selectAnimeYearMonth]]):m("v-if",!0)]),n("li",ne,[i(w,{to:"/",class:b(["nav-link",{active:e.$route.path.match(/\/(\d+)/)}])},{default:v((()=>[oe])),_:1},8,["class"])]),n("li",le,[i(w,{to:"/all",class:b(["nav-link",{active:"/all"===e.$route.path}])},{default:v((()=>[ie])),_:1},8,["class"])])]),i(L,{settingVar:o.udata,"onUpdate:settingVar":t[2]||(t[2]=e=>f.updateSettingVar(e)),storageName:f.storageName},null,8,["settingVar","storageName"])])])},W.__scopeId="data-v-61dd7a3d";const re={props:{item:Object},emits:["update:item"],methods:{toggle(e){this.item.show=!this.item.show,this.$emit("update:item",this.item)},orderItem(e){this.item.order=prompt(`請輸入「${this.item.name}」動畫名次`),e.preventDefault(),this.$emit("update:item",this.item)}}};e("data-v-ec85bece");const he=["data-order"],de={class:"myAnimeListItem__name"},ce={class:"flex"},me=["src"],ue={class:"myAnimeListItem__staff"};t(),re.render=function(e,t,o,l,i,r){return a(),s("div",{class:"myAnimeListItem",onClick:t[0]||(t[0]=e=>r.toggle(e)),onContextmenu:t[1]||(t[1]=e=>r.orderItem(e)),style:f({order:o.item.order}),"data-order":o.item.order},[n("div",{class:b(["cancel",{hidden:o.item.show}])},null,2),n("div",de,p(o.item.name),1),n("div",ce,[n("img",{class:"myAnimeListItem__animeImg",src:o.item.img,referrerpolicy:"no-referrer"},null,8,me),n("pre",ue,"                "+p(o.item.staff)+"\n            ",1)])],44,he)},re.__scopeId="data-v-ec85bece";const pe={props:{items:Array},components:{MyAnimeListItem:re},data:()=>({userData:[]}),mounted(){console.log(this.jsonpath)},methods:{udata(){console.log("test");let e=this.items.filter((e=>!0===e.show||e.order>"0"));return this.userData=e.map((e=>{let{name:t,show:s,order:a}=e;return{name:t,show:s,order:a}})),this.$emit("changeHash",JSON.stringify(this.userData)),this.userData}}};e("data-v-87894c34");const ge={class:"container"},ve={class:"myanimelist"};t(),pe.render=function(e,t,o,i,h,d){const u=l("MyAnimeListItem");return a(),s("div",ge,[n("div",ve,[m(" [v-for 循环时直接使用v-model绑定value报错 - 简书](https://www.jianshu.com/p/947b2aa0cd8c) "),(a(!0),s(r,null,c(o.items,((e,s)=>(a(),w(u,{item:o.items[s],"onUpdate:item":[e=>o.items[s]=e,t[0]||(t[0]=e=>d.udata(e))],key:e.img},null,8,["item","onUpdate:item"])))),128))])])},pe.__scopeId="data-v-87894c34";const be={props:{jsonpath:String},components:{Header:W,MyAnimeList:pe},data:()=>({items:[],selectList:[]}),methods:{changeHash(e){console.log("ent",e),this.selectList=JSON.parse(e),this.$router.replace({hash:"#"+L.encodeURL(e)})},changeHash2(e){console.log("ent",e),this.$router.replace({hash:"#"+L.encodeURL(JSON.stringify(e))})}},mounted(){let e=O.find((e=>e.url==="/"+this.jsonpath))||O[0];console.log("selected",e),y.get(`src/assets/json/${e.name}.json`).then((e=>{this.items=e.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1));let t=JSON.parse(L.decode(this.$route.hash.substr(1)));this.selectList=t,t.forEach((e=>{let t=this.items.find((t=>t.name===e.name));t&&(t.show=null==e?void 0:e.show,t.order=null==e?void 0:e.order)}))})).catch((e=>console.log(e)))},async beforeRouteUpdate(e,t){if(e.path===t.path){try{this.items.forEach((e=>delete e.show&&delete e.order)),JSON.parse(L.decode(e.hash.substr(1))).forEach((e=>{let t=this.items.find((t=>t.name===e.name));t&&(t.show=null==e?void 0:e.show,t.order=null==e?void 0:e.order)}))}catch(a){console.error(a)}return!0}console.log("to",e,"from",t);let s=O.find((t=>t.url==="/"+e.params.jsonpath))||O[0];y.get(`src/assets/json/${s.name}.json`).then((e=>{this.items=e.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1)),JSON.parse(L.decode(this.$route.hash.substr(1))).forEach((e=>{let t=this.items.find((t=>t.name===e.name));t&&(t.show=null==e?void 0:e.show,t.order=null==e?void 0:e.order)}))})).catch((e=>console.log(e)))}};be.render=function(e,t,n,o,h,d){const c=l("Header"),m=l("MyAnimeList");return a(),s(r,null,[i(c,{jsonpath:n.jsonpath,udata:h.selectList,"onUpdate:udata":t[0]||(t[0]=e=>d.changeHash2(e))},null,8,["jsonpath","udata"]),i(m,{items:h.items,"onUpdate:items":t[1]||(t[1]=e=>h.items=e),onChangeHash:t[2]||(t[2]=e=>d.changeHash(e))},null,8,["items"])],64)};const fe={props:{openAnimeList:String},components:{Header:W,MyAnimeList:pe},data:()=>({allListObj:{},animeMenu:O}),computed:{routeObj(){return{path:this.$route.path,hash:this.$route.hash}},selectedList(){let e=[];return this.animeMenu.forEach((t=>{var s;console.log("selectedList()",this.allListObj[t.name]),console.log("anime.name",t.name);let a=null==(s=this.allListObj[t.name])?void 0:s.filter((e=>(null==e?void 0:e.show)||(null==e?void 0:e.order)));a&&e.push(...a)})),console.log("selectedList::items",e),e},urlAnimeList(){let e=[];return O.forEach((t=>{var s;(null==(s=this.allListObj[t.name])?void 0:s.length)&&e.push(t.name)})),e.join(",")}},methods:{changeHash(e,t){console.log("dataJson",t);let s=this.selectedList.map((e=>{let{name:t,show:s,order:a}=e;return{name:t,show:s,order:a}}));this.$router.replace({path:`/all/${this.urlAnimeList}`,hash:"#"+L.encodeURL(JSON.stringify(s))})},replaceUrl(e){if(console.log(e),this.$router.replace({path:e.path,hash:e.hash}),this.openAnimeList){let e=this.openAnimeList.split(",");console.log(e),e.forEach((e=>{0===this.allListObj[e].length&&this.getList(e)})),O.forEach((e=>{this.allListObj[`${e.name}`].forEach((e=>delete e.show&&delete e.order))})),JSON.parse(L.decode(this.$route.hash.substr(1))).forEach((t=>{e.forEach((e=>{let s=this.allListObj[e].find((e=>e.name===t.name));s&&(s.show=null==t?void 0:t.show,s.order=null==t?void 0:t.order)}))}))}},getList(e){var t,s;console.log("jsonpath",e);let a=this.animeMenu.filter((t=>t.name===e));if(a[0].show=!(null==(t=a[0])?void 0:t.show),console.log(JSON.parse(JSON.stringify(a))),null==(s=this.allListObj[e])?void 0:s.length)return!1;y.get(`src/assets/json/${e}.json`).then((t=>{this.allListObj[e]=t.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1)),console.log(L.decode(this.$route.hash.substr(1))),JSON.parse(L.decode(this.$route.hash.substr(1))).forEach((t=>{let s=this.allListObj[e].find((e=>e.name===t.name));s&&(s.show=null==t?void 0:t.show,s.order=null==t?void 0:t.order)}))})).catch((e=>console.log(e)))}},mounted(){if(O.forEach((e=>{this.allListObj[`${e.name}`]=[]})),this.openAnimeList){let e=this.openAnimeList.split(",");console.log(e),e.forEach((e=>this.getList(e)))}else console.log(O[0].name),this.getList(O[0].name),console.log(O[1].name),this.getList(O[1].name)}};e("data-v-dae33ea0");const we={class:"position-relative"},Le=n("div",{class:"position-sticky text-center bg-white top-999"},[n("h1",null,"我的排名清單")],-1),ye=["onClick"];t(),fe.render=function(e,t,o,h,d,u){const g=l("Header"),v=l("MyAnimeList");return a(),s(r,null,[i(g,{udata:u.routeObj,"onUpdate:udata":t[0]||(t[0]=e=>u.replaceUrl(e))},null,8,["udata"]),n("div",we,[Le,i(v,{items:u.selectedList,"onUpdate:items":t[1]||(t[1]=e=>u.selectedList=e),onChangeHash:t[2]||(t[2]=e=>u.changeHash(e))},null,8,["items"])]),(a(!0),s(r,null,c(d.animeMenu,(e=>(a(),s("div",{class:"position-relative",key:e.name},[n("div",{class:"position-sticky text-center bg-white top-999",onClick:t=>u.getList(e.name)},[n("h1",null,p(e.name),1)],8,ye),e.show?(a(),w(v,{key:0,items:d.allListObj[e.name],"onUpdate:items":t=>d.allListObj[e.name]=t,onChangeHash:t=>u.changeHash(e.name,t)},null,8,["items","onUpdate:items","onChangeHash"])):m("v-if",!0)])))),128))],64)},fe.__scopeId="data-v-dae33ea0";const je=[{path:"/",redirect:O[0].url},{path:"/all/",component:fe,props:!0},{path:"/all/:openAnimeList",component:fe,props:!0},{path:"/:jsonpath",component:be,props:!0}];console.log(je);var xe=j({history:x(),routes:je});S($).use(xe).mount("#app");
