import{p as t,a as e,c as a,o as s,b as n,d as i,r as o,e as l,F as r,f as h,g as d,w as c,v as m,h as u,i as p,j as g,t as v,k as b,n as w,l as f,m as L,q as y,s as k,u as A,x as j,y as x}from"./vendor.48a7a2a1.js";const U={};t("data-v-40ab164b");const C={class:"mt-5 py-5 text-muted text-center text-small"},S=[n("p",{class:"mb-1"},[i("網站動畫資料來源來自"),n("a",{href:"https://yuc.wiki/"},"YuC's AnimeList"),i("&"),n("a",{href:"https://acgntaiwan.github.io/Anime-List/"},"ACGNTaiwan")],-1)];e(),U.render=function(t,e,n,i,o,l){return s(),a("footer",C,S)},U.__scopeId="data-v-40ab164b";const O={props:{jsonpath:String},components:{Footer:U}};O.render=function(t,e,n,i,h,d){const c=o("router-view"),m=o("Footer");return s(),a(r,null,[l(c),l(m)],64)};var M=[{name:"2022年7月新番",url:"/202207",YuiWikiUrl:"https://yuc.wiki//202207",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2022.07.json"},{name:"2022年4月新番",url:"/202204",YuiWikiUrl:"https://yuc.wiki//202204",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2022.04.json"},{name:"2022年1月新番",url:"/202201",YuiWikiUrl:"https://yuc.wiki//202201",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2022.01.json"},{name:"2021年10月新番",url:"/202110",YuiWikiUrl:"https://yuc.wiki//202110",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2021.10.json"},{name:"2021年7月新番",url:"/202107",YuiWikiUrl:"https://yuc.wiki//202107",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2021.07.json"},{name:"2021年4月新番",url:"/202104",YuiWikiUrl:"https://yuc.wiki//202104",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2021.04.json"},{name:"2021年1月新番",url:"/202101",YuiWikiUrl:"https://yuc.wiki//202101",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2021.01.json"},{name:"2020年10月新番",url:"/202010",YuiWikiUrl:"https://yuc.wiki//202010",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2020.10.json"},{name:"2020年7月新番",url:"/202007",YuiWikiUrl:"https://yuc.wiki//202007",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2020.07.json"},{name:"2020年4月新番",url:"/202004",YuiWikiUrl:"https://yuc.wiki//202004",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2020.04.json"},{name:"2020年1月新番",url:"/202001",YuiWikiUrl:"https://yuc.wiki//202001",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2020.01.json"},{name:"2019年10月新番",url:"/201910",YuiWikiUrl:"https://yuc.wiki//201910",ACGNTaiwanUrl:"https://acgntaiwan.github.io/Anime-List/anime-data/anime2019.10.json"}];const N={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 48 48"},$=[n("g",{fill:"none",stroke:"currentColor","stroke-width":"4","stroke-linejoin":"round"},[n("path",{d:"M18.284 43.171a19.995 19.995 0 0 1-8.696-5.304a6 6 0 0 0-5.182-9.838A20.09 20.09 0 0 1 4 24c0-2.09.32-4.106.916-6H5a6 6 0 0 0 5.385-8.65a19.968 19.968 0 0 1 8.267-4.627A6 6 0 0 0 24 8a6 6 0 0 0 5.348-3.277a19.968 19.968 0 0 1 8.267 4.627A6 6 0 0 0 43.084 18A19.99 19.99 0 0 1 44 24c0 1.38-.14 2.728-.406 4.029a6 6 0 0 0-5.182 9.838a19.995 19.995 0 0 1-8.696 5.304a6.003 6.003 0 0 0-11.432 0z"}),n("path",{d:"M24 31a7 7 0 1 0 0-14a7 7 0 0 0 0 14z"})],-1)];var T={name:"icon-park-outline-setting-two",render:function(t,e){return s(),a("svg",N,$)}};const I={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},H=[n("path",{d:"M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8z",fill:"none"},null,-1),n("path",{d:"M292 64h-72a4 4 0 0 0-4 4v28h80V68a4 4 0 0 0-4-4z",fill:"none"},null,-1),n("path",{d:"M447.55 96H336V48a16 16 0 0 0-16-16H192a16 16 0 0 0-16 16v48H64.45L64 136h33l20.09 314A32 32 0 0 0 149 480h214a32 32 0 0 0 31.93-29.95L415 136h33zM176 416l-9-256h33l9 256zm96 0h-32V160h32zm24-320h-80V68a4 4 0 0 1 4-4h72a4 4 0 0 1 4 4zm40 320h-33l9-256h33z",fill:"currentColor"},null,-1)];var V={name:"ion-trash-sharp",render:function(t,e){return s(),a("svg",I,H)}};const _={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Y=[n("path",{d:"M16 2l5 5v14.008a.993.993 0 0 1-.993.992H3.993A1 1 0 0 1 3 21.008V2.992C3 2.444 3.445 2 3.993 2H16zm-3 10V8h-2v4H8l4 4l4-4h-3z",fill:"currentColor"},null,-1)];var F={name:"ri-file-download-fill",render:function(t,e){return s(),a("svg",_,Y)}};const J={methods:{loadTextFromFile(t){const e=t.target.files[0],a=new FileReader;a.onload=t=>this.$emit("load",t.target.result),a.readAsText(e)}}};t("data-v-12fbf2f6");const E={class:"text-reader"};e(),J.render=function(t,e,i,o,l,c){return s(),a(r,null,[h(" 參考: [Creating a Vue.js File Reader Component Using the FileReader API | DigitalOcean](https://www.digitalocean.com/community/tutorials/vuejs-file-reader-component) "),n("div",null,[n("label",E,[n("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>c.loadTextFromFile&&c.loadTextFromFile(...t))},null,32),d(t.$slots,"default",{},void 0,!0)])])],2112)},J.__scopeId="data-v-12fbf2f6";const R={props:{settingVar:Array,storageName:{type:String,default:"saveItems"}},data:()=>({searchText:"",settings:[],text:""}),computed:{settingFilted(){return this.searchText?this.settings.filter((t=>{var e;return(null==(e=null==t?void 0:t.name)?void 0:e.indexOf(this.searchText))>=0})):this.settings}},components:{IconSetting:T,IconTrashSharp:V,FileReader:J,FileDownload:F},methods:{updateSettingName(t){let e=prompt("修改設定名稱");e&&(t.name=e)},readSetting(t){this.$emit("update:settingVar",t.settingVar)},downloadTextFile(t){let e=[JSON.stringify(t)],a=new Blob(e,{type:"application/json"});this.saveData(a,`${(null==t?void 0:t.name)||"未命名"}.json`)},replaceSetting(t){t.settingVar=this.settingVar},deleteSetting(t,e){this.settings.splice(e,1)},appendSetting(){let t={};t.name=prompt("新增設定名稱"),t.settingVar=this.settingVar,(null==t?void 0:t.name)&&this.settings.unshift(t)},loadFileText(t){try{let e=JSON.parse(t),{name:a,settingVar:s}=e;a&&s?this.settings.unshift(e):alert("內容格式有缺失，無法匯入!!")}catch(e){console.error(e),alert("匯入 JSON 發生錯誤，有可能是格式錯誤!!")}},saveData(t,e){const a=document.createElement("a");document.body.appendChild(a),a.style="display: none";let s=window.URL.createObjectURL(t);a.href=s,a.download=e,a.click(),a.href="",window.URL.revokeObjectURL(s)}},mounted(){try{let t=JSON.parse(localStorage.getItem(this.storageName));(null==t?void 0:t.length)&&(this.settings=t)}catch(t){console.error(t)}},watch:{settings:{handler:function(){console.log("save settings"),localStorage.setItem(this.storageName,JSON.stringify(this.settings))},deep:!0}}};t("data-v-178e86ed");const G={class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},W={class:"modal fade bd-example-modal-lg",tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true",id:"exampleModal"},z={class:"modal-dialog modal-lg"},D={class:"modal-content"},B=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"exampleModalToggleLabel"},"設定"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),P={class:"modal-body"},q={class:"header d-flex"},K={class:"flex-grow-1"},Q=n("div",{class:"btn btn-secondary"},"匯入檔案",-1),X=n("hr",null,null,-1),Z={class:"item-title"},tt=["onClick"],et=["onClick"],at=["onClick"],st=["onClick"],nt=["onClick"],it=n("div",{class:"modal-footer"},[h(' <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">Open second modal</button> ')],-1);e(),R.render=function(t,e,i,h,d,b){const w=o("IconSetting"),f=o("file-reader"),L=o("FileDownload"),y=o("IconTrashSharp");return s(),a(r,null,[n("a",G,[l(w)]),n("div",W,[n("div",z,[n("div",D,[B,n("div",P,[n("div",q,[n("div",K,[c(n("input",{class:"form-input",type:"text",placeholder:"快速搜尋","onUpdate:modelValue":e[0]||(e[0]=t=>d.searchText=t)},null,512),[[m,d.searchText,void 0,{trim:!0}]]),n("button",{type:"button",class:"btn btn-light",onClick:e[1]||(e[1]=t=>d.searchText="")},"清空")]),l(f,{onLoad:e[2]||(e[2]=t=>b.loadFileText(t))},{default:u((()=>[Q])),_:1}),n("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=t=>b.appendSetting())},"另存設定")]),X,(s(!0),a(r,null,p(d.settings,((t,e)=>{var i;return c((s(),a("div",{class:"item",key:t.name},[n("span",Z,v(t.name),1),n("div",null,[n("button",{class:"btn btn-sm btn-secondary",onClick:e=>b.updateSettingName(t)}," 編輯名稱 ",8,tt)]),n("div",null,[n("button",{class:"btn btn-sm btn-info",onClick:e=>b.readSetting(t)}," 讀取設定 ",8,et)]),n("div",null,[n("button",{class:"btn btn-sm btn-success",onClick:e=>b.replaceSetting(t)}," 覆蓋設定 ",8,at)]),n("div",null,[n("button",{class:"btn btn-sm btn-secondary",onClick:e=>b.downloadTextFile(t)},[l(L)],8,st)]),n("div",null,[n("button",{class:"btn btn-sm btn-danger",onClick:a=>b.deleteSetting(t,e)},[l(y)],8,nt)])],512)),[[g,(null==(i=null==t?void 0:t.name)?void 0:i.indexOf(d.searchText))>=0]])})),128))]),it])])])],64)},R.__scopeId="data-v-178e86ed";const ot={components:{SettingManager:R},props:{jsonpath:String,udata:Array},data:()=>({animeMenu:M}),computed:{selectAnimeYearMonth(){return"/"+this.jsonpath},storageName(){return this.$route.path.indexOf("/all")>=0?"allItem":"MonthItem"}},methods:{linkAnimeYearMonth(t){console.log(t.target.value),this.$router.push({path:t.target.value}).catch((t=>{throw new Error(`Problem handling something: ${t}.`)})),console.log("test")},updateSettingVar(t){console.log(t),this.$emit("update:udata",t)}}};t("data-v-61dd7a3d");const lt={class:"navbar navbar-light bg-light"},rt={class:"container justify-content-start"},ht=n("a",{class:"navbar-brand",href:"#"},[n("img",{src:"https://getbootstrap.com/docs/5.0/assets/brand/bootstrap-logo.svg",alt:"",width:"30",height:"24",class:"d-inline-block align-text-top"}),i(" 我的新番清單 ")],-1),dt={class:"navbar-nav mr-auto mb-2 me-auto mb-lg-0"},ct={class:"nav-item"},mt=["value"],ut={class:"nav-item"},pt=i("月份清單"),gt={class:"nav-item"},vt=i("每季清單");e(),ot.render=function(t,e,i,d,m,g){const f=o("router-link"),L=o("SettingManager");return s(),a("nav",lt,[n("div",rt,[ht,n("ul",dt,[n("li",ct,[i.jsonpath?c((s(),a("select",{key:0,class:"form-select","onUpdate:modelValue":e[0]||(e[0]=t=>g.selectAnimeYearMonth=t),onChange:e[1]||(e[1]=t=>g.linkAnimeYearMonth(t))},[(s(!0),a(r,null,p(m.animeMenu,(t=>(s(),a("option",{key:t.name,value:t.url},v(t.name),9,mt)))),128))],544)),[[b,g.selectAnimeYearMonth]]):h("v-if",!0)]),n("li",ut,[l(f,{to:"/",class:w(["nav-link",{active:t.$route.path.match(/\/(\d+)/)}])},{default:u((()=>[pt])),_:1},8,["class"])]),n("li",gt,[l(f,{to:"/all",class:w(["nav-link",{active:"/all"===t.$route.path}])},{default:u((()=>[vt])),_:1},8,["class"])])]),l(L,{settingVar:i.udata,"onUpdate:settingVar":e[2]||(e[2]=t=>g.updateSettingVar(t)),storageName:g.storageName},null,8,["settingVar","storageName"])])])},ot.__scopeId="data-v-61dd7a3d";const bt={props:{item:Object},emits:["update:item"],methods:{toggle(t){this.item.show=!this.item.show,this.$emit("update:item",this.item)},orderItem(t){this.item.order=prompt(`請輸入「${this.item.name}」動畫名次`),t.preventDefault(),this.$emit("update:item",this.item)}}};t("data-v-ec85bece");const wt=["data-order"],ft={class:"myAnimeListItem__name"},Lt={class:"flex"},yt=["src"],kt={class:"myAnimeListItem__staff"};e(),bt.render=function(t,e,i,o,l,r){return s(),a("div",{class:"myAnimeListItem",onClick:e[0]||(e[0]=t=>r.toggle(t)),onContextmenu:e[1]||(e[1]=t=>r.orderItem(t)),style:f({order:i.item.order}),"data-order":i.item.order},[n("div",{class:w(["cancel",{hidden:i.item.show}])},null,2),n("div",ft,v(i.item.name),1),n("div",Lt,[n("img",{class:"myAnimeListItem__animeImg",src:i.item.img,referrerpolicy:"no-referrer"},null,8,yt),n("pre",kt,"                "+v(i.item.staff||i.item.description)+"\n            ",1)])],44,wt)},bt.__scopeId="data-v-ec85bece";const At={props:{items:Array},components:{MyAnimeListItem:bt},data:()=>({userData:[]}),mounted(){console.log(this.jsonpath)},methods:{udata(){console.log("test");let t=this.items.filter((t=>!0===t.show||t.order>"0"));return this.userData=t.map((t=>{let{name:e,show:a,order:s}=t;return{name:e,show:a,order:s}})),this.$emit("changeHash",JSON.stringify(this.userData)),this.userData}}};t("data-v-87894c34");const jt={class:"container"},xt={class:"myanimelist"};e(),At.render=function(t,e,i,l,d,c){const m=o("MyAnimeListItem");return s(),a("div",jt,[n("div",xt,[h(" [v-for 循环时直接使用v-model绑定value报错 - 简书](https://www.jianshu.com/p/947b2aa0cd8c) "),(s(!0),a(r,null,p(i.items,((t,a)=>(s(),L(m,{item:i.items[a],"onUpdate:item":[t=>i.items[a]=t,e[0]||(e[0]=t=>c.udata(t))],key:t.img},null,8,["item","onUpdate:item"])))),128))])])},At.__scopeId="data-v-87894c34";const Ut={props:{jsonpath:String},components:{Header:ot,MyAnimeList:At},data:()=>({items:[],selectList:[]}),methods:{changeHash(t){console.log("ent",t),this.selectList=JSON.parse(t),this.$router.replace({hash:"#"+y.encodeURL(t)})},changeHash2(t){console.log("ent",t),this.$router.replace({hash:"#"+y.encodeURL(JSON.stringify(t))})}},mounted(){let t=M.find((t=>t.url==="/"+this.jsonpath))||M[0];console.log("selected",t),k.get(`src/assets/json/${t.name}.json`).then((t=>{this.items=t.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1));let e=JSON.parse(y.decode(this.$route.hash.substr(1)));this.selectList=e,e.forEach((t=>{let e=this.items.find((e=>e.name===t.name));e&&(e.show=null==t?void 0:t.show,e.order=null==t?void 0:t.order)}))})).catch((t=>console.log(t)))},async beforeRouteUpdate(t,e){if(t.path===e.path){try{this.items.forEach((t=>delete t.show&&delete t.order)),JSON.parse(y.decode(t.hash.substr(1))).forEach((t=>{let e=this.items.find((e=>e.name===t.name));e&&(e.show=null==t?void 0:t.show,e.order=null==t?void 0:t.order)}))}catch(s){console.error(s)}return!0}console.log("to",t,"from",e);let a=M.find((e=>e.url==="/"+t.params.jsonpath))||M[0];k.get(`src/assets/json/${a.name}.json`).then((t=>{this.items=t.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1)),JSON.parse(y.decode(this.$route.hash.substr(1))).forEach((t=>{let e=this.items.find((e=>e.name===t.name));e&&(e.show=null==t?void 0:t.show,e.order=null==t?void 0:t.order)}))})).catch((t=>console.log(t)))}};Ut.render=function(t,e,n,i,h,d){const c=o("Header"),m=o("MyAnimeList");return s(),a(r,null,[l(c,{jsonpath:n.jsonpath,udata:h.selectList,"onUpdate:udata":e[0]||(e[0]=t=>d.changeHash2(t))},null,8,["jsonpath","udata"]),l(m,{items:h.items,"onUpdate:items":e[1]||(e[1]=t=>h.items=t),onChangeHash:e[2]||(e[2]=t=>d.changeHash(t))},null,8,["items"])],64)};const Ct={props:{openAnimeList:String},components:{Header:ot,MyAnimeList:At},data:()=>({allListObj:{},animeMenu:M}),computed:{routeObj(){return{path:this.$route.path,hash:this.$route.hash}},selectedList(){let t=[];return this.animeMenu.forEach((e=>{var a;console.log("selectedList()",this.allListObj[e.name]),console.log("anime.name",e.name);let s=null==(a=this.allListObj[e.name])?void 0:a.filter((t=>(null==t?void 0:t.show)||(null==t?void 0:t.order)));s&&t.push(...s)})),console.log("selectedList::items",t),t},urlAnimeList(){let t=[];return M.forEach((e=>{var a;(null==(a=this.allListObj[e.name])?void 0:a.length)&&t.push(e.name)})),t.join(",")}},methods:{changeHash(t,e){console.log("dataJson",e);let a=this.selectedList.map((t=>{let{name:e,show:a,order:s}=t;return{name:e,show:a,order:s}}));this.$router.replace({path:`/all/${this.urlAnimeList}`,hash:"#"+y.encodeURL(JSON.stringify(a))})},replaceUrl(t){if(console.log(t),this.$router.replace({path:t.path,hash:t.hash}),this.openAnimeList){let t=this.openAnimeList.split(",");console.log(t),t.forEach((t=>{0===this.allListObj[t].length&&this.getList(t)})),M.forEach((t=>{this.allListObj[`${t.name}`].forEach((t=>delete t.show&&delete t.order))})),JSON.parse(y.decode(this.$route.hash.substr(1))).forEach((e=>{t.forEach((t=>{let a=this.allListObj[t].find((t=>t.name===e.name));a&&(a.show=null==e?void 0:e.show,a.order=null==e?void 0:e.order)}))}))}},getList(t){var e,a;console.log("jsonpath",t);let s=this.animeMenu.filter((e=>e.name===t));if(s[0].show=!(null==(e=s[0])?void 0:e.show),console.log(JSON.parse(JSON.stringify(s))),null==(a=this.allListObj[t])?void 0:a.length)return!1;k.get(`src/assets/json/${t}.json`).then((e=>{this.allListObj[t]=e.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1)),console.log(y.decode(this.$route.hash.substr(1))),JSON.parse(y.decode(this.$route.hash.substr(1))).forEach((e=>{let a=this.allListObj[t].find((t=>t.name===e.name));a&&(a.show=null==e?void 0:e.show,a.order=null==e?void 0:e.order)}))})).catch((t=>console.log(t)))}},mounted(){if(M.forEach((t=>{this.allListObj[`${t.name}`]=[]})),this.openAnimeList){let t=this.openAnimeList.split(",");console.log(t),t.forEach((t=>this.getList(t)))}else console.log(M[0].name),this.getList(M[0].name),console.log(M[1].name),this.getList(M[1].name)}};t("data-v-dae33ea0");const St={class:"position-relative"},Ot=n("div",{class:"position-sticky text-center bg-white top-999"},[n("h1",null,"我的排名清單")],-1),Mt=["onClick"];e(),Ct.render=function(t,e,i,d,c,m){const u=o("Header"),g=o("MyAnimeList");return s(),a(r,null,[l(u,{udata:m.routeObj,"onUpdate:udata":e[0]||(e[0]=t=>m.replaceUrl(t))},null,8,["udata"]),n("div",St,[Ot,l(g,{items:m.selectedList,"onUpdate:items":e[1]||(e[1]=t=>m.selectedList=t),onChangeHash:e[2]||(e[2]=t=>m.changeHash(t))},null,8,["items"])]),(s(!0),a(r,null,p(c.animeMenu,(t=>(s(),a("div",{class:"position-relative",key:t.name},[n("div",{class:"position-sticky text-center bg-white top-999",onClick:e=>m.getList(t.name)},[n("h1",null,v(t.name),1)],8,Mt),t.show?(s(),L(g,{key:0,items:c.allListObj[t.name],"onUpdate:items":e=>c.allListObj[t.name]=e,onChangeHash:e=>m.changeHash(t.name,e)},null,8,["items","onUpdate:items","onChangeHash"])):h("v-if",!0)])))),128))],64)},Ct.__scopeId="data-v-dae33ea0";const Nt=[{path:"/",redirect:M[0].url},{path:"/all/",component:Ct,props:!0},{path:"/all/:openAnimeList",component:Ct,props:!0},{path:"/:jsonpath",component:Ut,props:!0}];console.log(Nt);var $t=A({history:j(),routes:Nt});x(O).use($t).mount("#app");
