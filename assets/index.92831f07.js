import{p as e,a as t,c as s,o as a,b as n,d as o,r as l,e as i,F as r,f as d,g as h,w as c,v as m,h as u,i as p,j as g,t as v,k as b,n as f,l as w,m as L,q as y,s as x,u as j,x as k,y as A}from"./vendor.48a7a2a1.js";const S={};e("data-v-40ab164b");const O={class:"mt-5 py-5 text-muted text-center text-small"},M=[n("p",{class:"mb-1"},[o("網站動畫資料來源來自"),n("a",{href:"https://yuc.wiki/"},"YuC's AnimeList"),o("&"),n("a",{href:"https://acgntaiwan.github.io/Anime-List/"},"ACGNTaiwan")],-1)];t(),S.render=function(e,t,n,o,l,i){return a(),s("footer",O,M)},S.__scopeId="data-v-40ab164b";const $={props:{jsonpath:String},components:{Footer:S}};$.render=function(e,t,n,o,d,h){const c=l("router-view"),m=l("Footer");return a(),s(r,null,[i(c),i(m)],64)};var C=[];const I={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 48 48"},N=[n("g",{fill:"none",stroke:"currentColor","stroke-width":"4","stroke-linejoin":"round"},[n("path",{d:"M18.284 43.171a19.995 19.995 0 0 1-8.696-5.304a6 6 0 0 0-5.182-9.838A20.09 20.09 0 0 1 4 24c0-2.09.32-4.106.916-6H5a6 6 0 0 0 5.385-8.65a19.968 19.968 0 0 1 8.267-4.627A6 6 0 0 0 24 8a6 6 0 0 0 5.348-3.277a19.968 19.968 0 0 1 8.267 4.627A6 6 0 0 0 43.084 18A19.99 19.99 0 0 1 44 24c0 1.38-.14 2.728-.406 4.029a6 6 0 0 0-5.182 9.838a19.995 19.995 0 0 1-8.696 5.304a6.003 6.003 0 0 0-11.432 0z"}),n("path",{d:"M24 31a7 7 0 1 0 0-14a7 7 0 0 0 0 14z"})],-1)];var _={name:"icon-park-outline-setting-two",render:function(e,t){return a(),s("svg",I,N)}};const H={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},V=[n("path",{d:"M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8z",fill:"none"},null,-1),n("path",{d:"M292 64h-72a4 4 0 0 0-4 4v28h80V68a4 4 0 0 0-4-4z",fill:"none"},null,-1),n("path",{d:"M447.55 96H336V48a16 16 0 0 0-16-16H192a16 16 0 0 0-16 16v48H64.45L64 136h33l20.09 314A32 32 0 0 0 149 480h214a32 32 0 0 0 31.93-29.95L415 136h33zM176 416l-9-256h33l9 256zm96 0h-32V160h32zm24-320h-80V68a4 4 0 0 1 4-4h72a4 4 0 0 1 4 4zm40 320h-33l9-256h33z",fill:"currentColor"},null,-1)];var U={name:"ion-trash-sharp",render:function(e,t){return a(),s("svg",H,V)}};const T={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},F=[n("path",{d:"M16 2l5 5v14.008a.993.993 0 0 1-.993.992H3.993A1 1 0 0 1 3 21.008V2.992C3 2.444 3.445 2 3.993 2H16zm-3 10V8h-2v4H8l4 4l4-4h-3z",fill:"currentColor"},null,-1)];var J={name:"ri-file-download-fill",render:function(e,t){return a(),s("svg",T,F)}};const E={methods:{loadTextFromFile(e){const t=e.target.files[0],s=new FileReader;s.onload=e=>this.$emit("load",e.target.result),s.readAsText(t)}}};e("data-v-12fbf2f6");const R={class:"text-reader"};t(),E.render=function(e,t,o,l,i,c){return a(),s(r,null,[d(" 參考: [Creating a Vue.js File Reader Component Using the FileReader API | DigitalOcean](https://www.digitalocean.com/community/tutorials/vuejs-file-reader-component) "),n("div",null,[n("label",R,[n("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>c.loadTextFromFile&&c.loadTextFromFile(...e))},null,32),h(e.$slots,"default",{},void 0,!0)])])],2112)},E.__scopeId="data-v-12fbf2f6";const z={props:{settingVar:Array,storageName:{type:String,default:"saveItems"}},data:()=>({searchText:"",settings:[],text:""}),computed:{settingFilted(){return this.searchText?this.settings.filter((e=>{var t;return(null==(t=null==e?void 0:e.name)?void 0:t.indexOf(this.searchText))>=0})):this.settings}},components:{IconSetting:_,IconTrashSharp:U,FileReader:E,FileDownload:J},methods:{updateSettingName(e){let t=prompt("修改設定名稱");t&&(e.name=t)},readSetting(e){this.$emit("update:settingVar",e.settingVar)},downloadTextFile(e){let t=[JSON.stringify(e)],s=new Blob(t,{type:"application/json"});this.saveData(s,`${(null==e?void 0:e.name)||"未命名"}.json`)},replaceSetting(e){e.settingVar=this.settingVar},deleteSetting(e,t){this.settings.splice(t,1)},appendSetting(){let e={};e.name=prompt("新增設定名稱"),e.settingVar=this.settingVar,(null==e?void 0:e.name)&&this.settings.unshift(e)},loadFileText(e){try{let t=JSON.parse(e),{name:s,settingVar:a}=t;s&&a?this.settings.unshift(t):alert("內容格式有缺失，無法匯入!!")}catch(t){console.error(t),alert("匯入 JSON 發生錯誤，有可能是格式錯誤!!")}},saveData(e,t){const s=document.createElement("a");document.body.appendChild(s),s.style="display: none";let a=window.URL.createObjectURL(e);s.href=a,s.download=t,s.click(),s.href="",window.URL.revokeObjectURL(a)}},mounted(){try{let e=JSON.parse(localStorage.getItem(this.storageName));(null==e?void 0:e.length)&&(this.settings=e)}catch(e){console.error(e)}},watch:{settings:{handler:function(){console.log("save settings"),localStorage.setItem(this.storageName,JSON.stringify(this.settings))},deep:!0}}};e("data-v-178e86ed");const D={class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},Y={class:"modal fade bd-example-modal-lg",tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true",id:"exampleModal"},B={class:"modal-dialog modal-lg"},P={class:"modal-content"},q=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"exampleModalToggleLabel"},"設定"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),G={class:"modal-body"},K={class:"header d-flex"},Q={class:"flex-grow-1"},W=n("div",{class:"btn btn-secondary"},"匯入檔案",-1),X=n("hr",null,null,-1),Z={class:"item-title"},ee=["onClick"],te=["onClick"],se=["onClick"],ae=["onClick"],ne=["onClick"],oe=n("div",{class:"modal-footer"},[d(' <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">Open second modal</button> ')],-1);t(),z.render=function(e,t,o,d,h,b){const f=l("IconSetting"),w=l("file-reader"),L=l("FileDownload"),y=l("IconTrashSharp");return a(),s(r,null,[n("a",D,[i(f)]),n("div",Y,[n("div",B,[n("div",P,[q,n("div",G,[n("div",K,[n("div",Q,[c(n("input",{class:"form-input",type:"text",placeholder:"快速搜尋","onUpdate:modelValue":t[0]||(t[0]=e=>h.searchText=e)},null,512),[[m,h.searchText,void 0,{trim:!0}]]),n("button",{type:"button",class:"btn btn-light",onClick:t[1]||(t[1]=e=>h.searchText="")},"清空")]),i(w,{onLoad:t[2]||(t[2]=e=>b.loadFileText(e))},{default:u((()=>[W])),_:1}),n("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=e=>b.appendSetting())},"另存設定")]),X,(a(!0),s(r,null,p(h.settings,((e,t)=>{var o;return c((a(),s("div",{class:"item",key:e.name},[n("span",Z,v(e.name),1),n("div",null,[n("button",{class:"btn btn-sm btn-secondary",onClick:t=>b.updateSettingName(e)}," 編輯名稱 ",8,ee)]),n("div",null,[n("button",{class:"btn btn-sm btn-info",onClick:t=>b.readSetting(e)}," 讀取設定 ",8,te)]),n("div",null,[n("button",{class:"btn btn-sm btn-success",onClick:t=>b.replaceSetting(e)}," 覆蓋設定 ",8,se)]),n("div",null,[n("button",{class:"btn btn-sm btn-secondary",onClick:t=>b.downloadTextFile(e)},[i(L)],8,ae)]),n("div",null,[n("button",{class:"btn btn-sm btn-danger",onClick:s=>b.deleteSetting(e,t)},[i(y)],8,ne)])],512)),[[g,(null==(o=null==e?void 0:e.name)?void 0:o.indexOf(h.searchText))>=0]])})),128))]),oe])])])],64)},z.__scopeId="data-v-178e86ed";const le={components:{SettingManager:z},props:{jsonpath:String,udata:Array},data:()=>({animeMenu:C}),computed:{selectAnimeYearMonth(){return"/"+this.jsonpath},storageName(){return this.$route.path.indexOf("/all")>=0?"allItem":"MonthItem"}},methods:{linkAnimeYearMonth(e){console.log(e.target.value),this.$router.push({path:e.target.value}).catch((e=>{throw new Error(`Problem handling something: ${e}.`)})),console.log("test")},updateSettingVar(e){console.log(e),this.$emit("update:udata",e)}}};e("data-v-61dd7a3d");const ie={class:"navbar navbar-light bg-light"},re={class:"container justify-content-start"},de=n("a",{class:"navbar-brand",href:"#"},[n("img",{src:"https://getbootstrap.com/docs/5.0/assets/brand/bootstrap-logo.svg",alt:"",width:"30",height:"24",class:"d-inline-block align-text-top"}),o(" 我的新番清單 ")],-1),he={class:"navbar-nav mr-auto mb-2 me-auto mb-lg-0"},ce={class:"nav-item"},me=["value"],ue={class:"nav-item"},pe=o("月份清單"),ge={class:"nav-item"},ve=o("每季清單");t(),le.render=function(e,t,o,h,m,g){const w=l("router-link"),L=l("SettingManager");return a(),s("nav",ie,[n("div",re,[de,n("ul",he,[n("li",ce,[o.jsonpath?c((a(),s("select",{key:0,class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>g.selectAnimeYearMonth=e),onChange:t[1]||(t[1]=e=>g.linkAnimeYearMonth(e))},[(a(!0),s(r,null,p(m.animeMenu,(e=>(a(),s("option",{key:e.name,value:e.url},v(e.name),9,me)))),128))],544)),[[b,g.selectAnimeYearMonth]]):d("v-if",!0)]),n("li",ue,[i(w,{to:"/",class:f(["nav-link",{active:e.$route.path.match(/\/(\d+)/)}])},{default:u((()=>[pe])),_:1},8,["class"])]),n("li",ge,[i(w,{to:"/all",class:f(["nav-link",{active:"/all"===e.$route.path}])},{default:u((()=>[ve])),_:1},8,["class"])])]),i(L,{settingVar:o.udata,"onUpdate:settingVar":t[2]||(t[2]=e=>g.updateSettingVar(e)),storageName:g.storageName},null,8,["settingVar","storageName"])])])},le.__scopeId="data-v-61dd7a3d";const be={props:{item:Object},emits:["update:item"],methods:{toggle(e){this.item.show=!this.item.show,this.$emit("update:item",this.item)},orderItem(e){this.item.order=prompt(`請輸入「${this.item.name}」動畫名次`),e.preventDefault(),this.$emit("update:item",this.item)},stringBytes(e){for(var t,s=e.length,a=0,n=0;n<s;n++)for(t=e.charCodeAt(n);t>0;)a++,t>>=8;return a}}};e("data-v-ec85bece");const fe=["data-order"],we={class:"myAnimeListItem__nameText"},Le={class:"flex"},ye=["src"],xe={class:"myAnimeListItem__staff"};t(),be.render=function(e,t,o,l,i,r){var d;return a(),s("div",{class:"myAnimeListItem",onClick:t[0]||(t[0]=e=>r.toggle(e)),onContextmenu:t[1]||(t[1]=e=>r.orderItem(e)),style:w({order:o.item.order}),"data-order":o.item.order},[n("div",{class:f(["cancel",{hidden:o.item.show}])},null,2),n("div",{class:f(["myAnimeListItem__name",{fontSmall:r.stringBytes(null==(d=o.item)?void 0:d.name)>=22}])},[n("div",we,v(o.item.name),1)],2),n("div",Le,[n("img",{class:"myAnimeListItem__animeImg",src:o.item.img,referrerpolicy:"no-referrer"},null,8,ye),n("pre",xe,"                "+v(o.item.staff||o.item.description)+"\n            ",1)])],44,fe)},be.__scopeId="data-v-ec85bece";const je={props:{items:Array},components:{MyAnimeListItem:be},data:()=>({userData:[]}),mounted(){console.log(this.jsonpath)},methods:{udata(){console.log("test");let e=this.items.filter((e=>!0===e.show||e.order>"0"));return this.userData=e.map((e=>{let{name:t,show:s,order:a}=e;return{name:t,show:s,order:a}})),this.$emit("changeHash",JSON.stringify(this.userData)),this.userData}}};e("data-v-87894c34");const ke={class:"container"},Ae={class:"myanimelist"};t(),je.render=function(e,t,o,i,h,c){const m=l("MyAnimeListItem");return a(),s("div",ke,[n("div",Ae,[d(" [v-for 循环时直接使用v-model绑定value报错 - 简书](https://www.jianshu.com/p/947b2aa0cd8c) "),(a(!0),s(r,null,p(o.items,((e,s)=>(a(),L(m,{item:o.items[s],"onUpdate:item":[e=>o.items[s]=e,t[0]||(t[0]=e=>c.udata(e))],key:e.img},null,8,["item","onUpdate:item"])))),128))])])},je.__scopeId="data-v-87894c34";const Se={props:{jsonpath:String},components:{Header:le,MyAnimeList:je},data:()=>({items:[],selectList:[]}),methods:{changeHash(e){console.log("ent",e),this.selectList=JSON.parse(e),this.$router.replace({hash:"#"+y.encodeURL(e)})},changeHash2(e){console.log("ent",e),this.$router.replace({hash:"#"+y.encodeURL(JSON.stringify(e))})}},mounted(){let e=C.find((e=>e.url==="/"+this.jsonpath))||C[0];console.log("selected",e),x.get(`src/assets/json/${e.name}.json`).then((e=>{this.items=e.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1));let t=JSON.parse(y.decode(this.$route.hash.substr(1)));this.selectList=t,t.forEach((e=>{let t=this.items.find((t=>t.name===e.name));t&&(t.show=null==e?void 0:e.show,t.order=null==e?void 0:e.order)}))})).catch((e=>console.log(e)))},async beforeRouteUpdate(e,t){if(e.path===t.path){try{this.items.forEach((e=>delete e.show&&delete e.order)),JSON.parse(y.decode(e.hash.substr(1))).forEach((e=>{let t=this.items.find((t=>t.name===e.name));t&&(t.show=null==e?void 0:e.show,t.order=null==e?void 0:e.order)}))}catch(a){console.error(a)}return!0}console.log("to",e,"from",t);let s=C.find((t=>t.url==="/"+e.params.jsonpath))||C[0];x.get(`src/assets/json/${s.name}.json`).then((e=>{this.items=e.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1)),JSON.parse(y.decode(this.$route.hash.substr(1))).forEach((e=>{let t=this.items.find((t=>t.name===e.name));t&&(t.show=null==e?void 0:e.show,t.order=null==e?void 0:e.order)}))})).catch((e=>console.log(e)))}};Se.render=function(e,t,n,o,d,h){const c=l("Header"),m=l("MyAnimeList");return a(),s(r,null,[i(c,{jsonpath:n.jsonpath,udata:d.selectList,"onUpdate:udata":t[0]||(t[0]=e=>h.changeHash2(e))},null,8,["jsonpath","udata"]),i(m,{items:d.items,"onUpdate:items":t[1]||(t[1]=e=>d.items=e),onChangeHash:t[2]||(t[2]=e=>h.changeHash(e))},null,8,["items"])],64)};const Oe={props:{openAnimeList:String},components:{Header:le,MyAnimeList:je},data:()=>({allListObj:{},animeMenu:C}),computed:{routeObj(){return{path:this.$route.path,hash:this.$route.hash}},selectedList(){let e=[];return this.animeMenu.forEach((t=>{var s;console.log("selectedList()",this.allListObj[t.name]),console.log("anime.name",t.name);let a=null==(s=this.allListObj[t.name])?void 0:s.filter((e=>(null==e?void 0:e.show)||(null==e?void 0:e.order)));a&&e.push(...a)})),console.log("selectedList::items",e),e},urlAnimeList(){let e=[];return C.forEach((t=>{var s;(null==(s=this.allListObj[t.name])?void 0:s.length)&&e.push(t.name)})),e.join(",")}},methods:{changeHash(e,t){console.log("dataJson",t);let s=this.selectedList.map((e=>{let{name:t,show:s,order:a}=e;return{name:t,show:s,order:a}}));this.$router.replace({path:`/all/${this.urlAnimeList}`,hash:"#"+y.encodeURL(JSON.stringify(s))})},replaceUrl(e){if(console.log(e),this.$router.replace({path:e.path,hash:e.hash}),this.openAnimeList){let e=this.openAnimeList.split(",");console.log(e),e.forEach((e=>{0===this.allListObj[e].length&&this.getList(e)})),C.forEach((e=>{this.allListObj[`${e.name}`].forEach((e=>delete e.show&&delete e.order))})),JSON.parse(y.decode(this.$route.hash.substr(1))).forEach((t=>{e.forEach((e=>{let s=this.allListObj[e].find((e=>e.name===t.name));s&&(s.show=null==t?void 0:t.show,s.order=null==t?void 0:t.order)}))}))}},getList(e){var t,s;console.log("jsonpath",e);let a=this.animeMenu.filter((t=>t.name===e));if(a[0].show=!(null==(t=a[0])?void 0:t.show),console.log(JSON.parse(JSON.stringify(a))),null==(s=this.allListObj[e])?void 0:s.length)return!1;x.get(`src/assets/json/${e}.json`).then((t=>{this.allListObj[e]=t.data,console.log("this.$route.hash.substr(1)",this.$route.hash.substr(1)),console.log(y.decode(this.$route.hash.substr(1))),JSON.parse(y.decode(this.$route.hash.substr(1))).forEach((t=>{let s=this.allListObj[e].find((e=>e.name===t.name));s&&(s.show=null==t?void 0:t.show,s.order=null==t?void 0:t.order)}))})).catch((e=>console.log(e)))}},mounted(){if(C.forEach((e=>{this.allListObj[`${e.name}`]=[]})),this.openAnimeList){let e=this.openAnimeList.split(",");console.log(e),e.forEach((e=>this.getList(e)))}else console.log(C[0].name),this.getList(C[0].name),console.log(C[1].name),this.getList(C[1].name)}};e("data-v-dae33ea0");const Me={class:"position-relative"},$e=n("div",{class:"position-sticky text-center bg-white top-999"},[n("h1",null,"我的排名清單")],-1),Ce=["onClick"];t(),Oe.render=function(e,t,o,h,c,m){const u=l("Header"),g=l("MyAnimeList");return a(),s(r,null,[i(u,{udata:m.routeObj,"onUpdate:udata":t[0]||(t[0]=e=>m.replaceUrl(e))},null,8,["udata"]),n("div",Me,[$e,i(g,{items:m.selectedList,"onUpdate:items":t[1]||(t[1]=e=>m.selectedList=e),onChangeHash:t[2]||(t[2]=e=>m.changeHash(e))},null,8,["items"])]),(a(!0),s(r,null,p(c.animeMenu,(e=>(a(),s("div",{class:"position-relative",key:e.name},[n("div",{class:"position-sticky text-center bg-white top-999",onClick:t=>m.getList(e.name)},[n("h1",null,v(e.name),1)],8,Ce),e.show?(a(),L(g,{key:0,items:c.allListObj[e.name],"onUpdate:items":t=>c.allListObj[e.name]=t,onChangeHash:t=>m.changeHash(e.name,t)},null,8,["items","onUpdate:items","onChangeHash"])):d("v-if",!0)])))),128))],64)},Oe.__scopeId="data-v-dae33ea0";const Ie=[{path:"/",redirect:C[0].url},{path:"/all/",component:Oe,props:!0},{path:"/all/:openAnimeList",component:Oe,props:!0},{path:"/:jsonpath",component:Se,props:!0}];console.log(Ie);var Ne=j({history:k(),routes:Ie});A($).use(Ne).mount("#app");
